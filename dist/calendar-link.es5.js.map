{"version":3,"file":"calendar-link.es5.js","sources":["../node_modules/object-to-querystring/lib/obj-to-query.js","../node_modules/object-to-querystring/lib/index.js","../src/calendar-link.ts"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar objectToQuery = function objectToQuery(input) {\n  return input ? ('?' + Object.keys(input).filter(function (key) {\n    return Boolean(input[key]) || input[key] === 0;\n  }).map(function (key) {\n    return [].concat(input[key]).map(function (val) {\n      return key + '=' + encodeURIComponent(val);\n    }).join('&');\n  }).join('&')).trim() : '?';\n};\n\nexports.default = objectToQuery;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _objToQuery = require('./obj-to-query');\n\nvar _objToQuery2 = _interopRequireDefault(_objToQuery);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _objToQuery2.default;","import objectToQuery from \"object-to-querystring\"\n\ninterface CalendarEvent {\n  title: string\n  start: Date\n  end?: Date\n  duration?: number\n  description?: string\n  location?: string\n  busy?: boolean\n  guests?: string[]\n}\n\ninterface GoogleLink {\n  action?: string\n  text?: string\n  dates?: string\n  details?: string\n  location?: string\n  trp?: boolean\n  sprop?: string\n  add?: string\n  src?: string\n  recur?: string\n}\n\nfunction sanitizeEvent(event: CalendarEvent) {\n  if (event.duration && !event.end) {\n    event.end = new Date()\n  }\n  return event\n}\n\nexport default class CalendarLink {\n  constructor(event: CalendarEvent) {}\n\n  google(event: CalendarEvent) {\n    event = sanitizeEvent(event)\n    const details: GoogleLink = {\n      action: \"TEMPLATE\",\n      text: event.title,\n      details: event.description,\n      location: event.location,\n      trp: event.busy,\n      dates: \"20201231T193000Z/20201231T223000Z\"\n    };\n    if (event.guests && event.guests.length) {\n      details.add = event.guests.join()\n    }\n    return \"https://calendar.google.com/calendar/render\" + objectToQuery(details)\n  }\n\n  yahoo(event: CalendarEvent) {\n    event = sanitizeEvent(event)\n    return JSON.stringify(event)\n  }\n\n  outlook(event: CalendarEvent) {\n    event = sanitizeEvent(event)\n    return JSON.stringify(event)\n  }\n}\n"],"names":["_objToQuery"],"mappings":";;;;;;;;;AAAA;AAEA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE;EAC3C,KAAK,EAAE,IAAI;CACZ,CAAC,CAAC;AACH,IAAI,aAAa,GAAG,SAAS,aAAa,CAAC,KAAK,EAAE;EAChD,OAAO,KAAK,GAAG,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE;IAC7D,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;GAChD,CAAC,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE;IACpB,OAAO,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE;MAC9C,OAAO,GAAG,GAAG,GAAG,GAAG,kBAAkB,CAAC,GAAG,CAAC,CAAC;KAC5C,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;GACd,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC;CAC5B,CAAC;;AAEF,eAAe,GAAG,aAAa;;;;;;ACf/B;AAEA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE;EAC3C,KAAK,EAAE,IAAI;CACZ,CAAC,CAAC;;;;AAIH,IAAI,YAAY,GAAG,sBAAsB,CAACA,UAAW,CAAC,CAAC;;AAEvD,SAAS,sBAAsB,CAAC,GAAG,EAAE,EAAE,OAAO,GAAG,IAAI,GAAG,CAAC,UAAU,GAAG,GAAG,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,CAAC,EAAE;;AAE/F,eAAe,GAAG,YAAY,CAAC,OAAO;;;;;ACctC,SAAS,aAAa,CAAC,KAAoB;IACzC,IAAI,KAAK,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE;QAChC,KAAK,CAAC,GAAG,GAAG,IAAI,IAAI,EAAE,CAAA;KACvB;IACD,OAAO,KAAK,CAAA;CACb;AAED;IACE,sBAAY,KAAoB;KAAI;IAEpC,6BAAM,GAAN,UAAO,KAAoB;QACzB,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,CAAA;QAC5B,IAAM,OAAO,GAAe;YAC1B,MAAM,EAAE,UAAU;YAClB,IAAI,EAAE,KAAK,CAAC,KAAK;YACjB,OAAO,EAAE,KAAK,CAAC,WAAW;YAC1B,QAAQ,EAAE,KAAK,CAAC,QAAQ;YACxB,GAAG,EAAE,KAAK,CAAC,IAAI;YACf,KAAK,EAAE,mCAAmC;SAC3C,CAAC;QACF,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE;YACvC,OAAO,CAAC,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,EAAE,CAAA;SAClC;QACD,OAAO,6CAA6C,GAAG,aAAa,CAAC,OAAO,CAAC,CAAA;KAC9E;IAED,4BAAK,GAAL,UAAM,KAAoB;QACxB,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,CAAA;QAC5B,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAA;KAC7B;IAED,8BAAO,GAAP,UAAQ,KAAoB;QAC1B,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,CAAA;QAC5B,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAA;KAC7B;IACH,mBAAC;CAAA,IAAA;;;;"}